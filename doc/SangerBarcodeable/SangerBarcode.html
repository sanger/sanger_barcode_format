<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: SangerBarcodeable::SangerBarcode
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "SangerBarcodeable::SangerBarcode";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../SangerBarcodeable.html" title="SangerBarcodeable (module)">SangerBarcodeable</a></span></span>
     &raquo; 
    <span class="title">SangerBarcode</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="../class_list.html"></iframe>

      <div id="content"><h1>Class: SangerBarcodeable::SangerBarcode
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">SangerBarcodeable::SangerBarcode</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd><span class='object_link'><a href="Builders.html" title="SangerBarcodeable::Builders (module)">Builders</a></span></dd>
  </dl>
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/sanger_barcodeable/sanger_barcode.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Barcodes generated by Sequencescape and other applications have two
representations, a human readable form, and an ean13 representation. The
ean13 is regularly used to generate physical barcodes, and is returned by
the various barcode scanners. Meanwhile the human readable form is often
used when items are searched for manually, particularly when there is no
physical access to the item itself.</p>

<p>Barcodes are comprised of three components:</p>

<pre class="code ruby"><code class="ruby">- A prefix: represented by two uppercase letters in the human readable form,
and encoded as three digits in the ean13. Please be aware that some encoded
prefixes begin with zero, which can get stripped under some circumstances.
Prefixes generally identify the type of item which has received the barcode
and are registered in an external database.
- A number: A number between 0 and 9999999 inclusive. The human form is not
typically zero padded.
- A checksum: In addition to the ean13 of the machine printed version,
barcodes also contain a single character / two digit internal checksum used to
identify input errors of the human readable form.</code></pre>

<p>In addition, printed forms will contain the standard EAN checksum digit.
This checksum is included in the output of this gem and does not need to be
recalculated .</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#checksum-instance_method" title="#checksum (instance method)">#<strong>checksum</strong>  &#x21d2; SangerBarcodeable::Checksum </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the internally used checksum.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#number-instance_method" title="#number (instance method)">#<strong>number</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute number.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#prefix-instance_method" title="#prefix (instance method)">#<strong>prefix</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute prefix.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_ean-instance_method" title="#check_ean (instance method)">#<strong>check_ean</strong>  &#x21d2; Bool </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Checks that the EAN digit of the provided machine barcode is correct In
practice this should be enforced by the scanners, so should only be false
is the data were input manually.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#human_barcode-instance_method" title="#human_barcode (instance method)">#<strong>human_barcode</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the human readable barcode.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(prefix: nil, number: nil, checksum: nil, machine_barcode: nil, human_barcode: nil, checksum_required: false)  &#x21d2; SangerBarcodable::SangerBarcode </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new barcode object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#machine_barcode-instance_method" title="#machine_barcode (instance method)">#<strong>machine_barcode</strong>  &#x21d2; Int </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the machine readable ean13.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#valid%3F-instance_method" title="#valid? (instance method)">#<strong>valid?</strong>  &#x21d2; Bool </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Checks is the data provided generate a valid barcode - The number is in the
correct range - Any provided checksum is correct - Any provided EAN is
correct.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Builders.html" title="SangerBarcodeable::Builders (module)">Builders</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Builders.html#from_human-instance_method" title="SangerBarcodeable::Builders#from_human (method)">from_human</a></span>, <span class='object_link'><a href="Builders.html#from_machine-instance_method" title="SangerBarcodeable::Builders#from_machine (method)">from_machine</a></span>, <span class='object_link'><a href="Builders.html#from_prefix_and_number-instance_method" title="SangerBarcodeable::Builders#from_prefix_and_number (method)">from_prefix_and_number</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(prefix: nil, number: nil, checksum: nil, machine_barcode: nil, human_barcode: nil, checksum_required: false)  &#x21d2; <tt>SangerBarcodable::SangerBarcode</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new barcode object. Either:</p>
<ul><li>
<p>Provide a prefix and number</p>
</li><li>
<p>Provide a machine barcode (Ean13)</p>
</li><li>
<p>Provide a human readable barcode (Eg. DN12345) If checksum required is set
to true will raise ChecksumRequired if the internal checksum character is
missing.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>prefix</span>
      
      
        <span class='type'>(<tt>String||SangerBarcodable::Prefix</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The two letter prefix or a Prefix object</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>number</span>
      
      
        <span class='type'>(<tt>Int</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The unique number, up to 7 digits long</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>checksum</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Optional human readable checksum character.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>machine_barcode</span>
      
      
        <span class='type'>(<tt>Sting||Int</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Ean13 barcode as red by a scanner</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>human_barcode</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Human readable barcode eg. DN12345R</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>checksum_required</span>
      
      
        <span class='type'>(<tt>Bool</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If set to true will enforce presence of checksum on human_barcode input</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45
46
47
48
49
50
51
52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sanger_barcodeable/sanger_barcode.rb', line 43</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span>
  <span class='label'>prefix:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>number:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>checksum:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>machine_barcode:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>human_barcode:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>checksum_required:</span> <span class='kw'>false</span>
<span class='rparen'>)</span>
  <span class='id identifier rubyid_argument_error!'>argument_error!</span> <span class='kw'>unless</span> <span class='lbracket'>[</span><span class='lparen'>(</span><span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_number'>number</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_machine_barcode'>machine_barcode</span><span class='comma'>,</span> <span class='id identifier rubyid_human_barcode'>human_barcode</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_one?'>one?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_prefix'>prefix</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_number'>number</span> <span class='op'>=</span> <span class='id identifier rubyid_number'>number</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_checksum'>checksum</span> <span class='op'>=</span> <span class='id identifier rubyid_checksum'>checksum</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_machine_barcode'>machine_barcode</span> <span class='op'>=</span> <span class='id identifier rubyid_machine_barcode'>machine_barcode</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>if</span> <span class='id identifier rubyid_machine_barcode'>machine_barcode</span>
  <span class='ivar'>@checksum_required</span> <span class='op'>=</span> <span class='id identifier rubyid_checksum_required'>checksum_required</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_human_barcode'>human_barcode</span> <span class='op'>=</span> <span class='id identifier rubyid_human_barcode'>human_barcode</span> <span class='kw'>if</span> <span class='id identifier rubyid_human_barcode'>human_barcode</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="checksum=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="checksum-instance_method">
  
    #<strong>checksum</strong>  &#x21d2; <tt><span class='object_link'><a href="Checksum.html" title="SangerBarcodeable::Checksum (class)">SangerBarcodeable::Checksum</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the internally used checksum</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Checksum.html" title="SangerBarcodeable::Checksum (class)">SangerBarcodeable::Checksum</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The internally used checksum</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sanger_barcodeable/sanger_barcode.rb', line 74</span>

<span class='kw'>def</span> <span class='id identifier rubyid_checksum'>checksum</span>
  <span class='ivar'>@checksum</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="number=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="number-instance_method">
  
    #<strong>number</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute number</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sanger_barcodeable/sanger_barcode.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_number'>number</span>
  <span class='ivar'>@number</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="prefix=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="prefix-instance_method">
  
    #<strong>prefix</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute prefix</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sanger_barcodeable/sanger_barcode.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_prefix'>prefix</span>
  <span class='ivar'>@prefix</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="check_ean-instance_method">
  
    #<strong>check_ean</strong>  &#x21d2; <tt>Bool</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Checks that the EAN digit of the provided machine barcode is correct In
practice this should be enforced by the scanners, so should only be false
is the data were input manually</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Bool</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if the EAN is valid, or the barcode was not a machine barcode
originally</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sanger_barcodeable/sanger_barcode.rb', line 94</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_ean'>check_ean</span>
  <span class='comment'># the EAN checksum is calculated so that the EAN of the code with checksum added is 0
</span>  <span class='comment'># except the new column (the checksum) start with a different weight (so the previous column keep the same weight)
</span>  <span class='ivar'>@machine_barcode</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_calculate_ean'>calculate_ean</span><span class='lparen'>(</span><span class='ivar'>@machine_barcode</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_zero?'>zero?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="human_barcode-instance_method">
  
    #<strong>human_barcode</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the human readable barcode</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>eg. DN12345R</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sanger_barcodeable/sanger_barcode.rb', line 67</span>

<span class='kw'>def</span> <span class='id identifier rubyid_human_barcode'>human_barcode</span>
  <span class='ivar'>@human_barcode</span> <span class='op'>||=</span> <span class='id identifier rubyid_calculate_human_barcode'>calculate_human_barcode</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="machine_barcode-instance_method">
  
    #<strong>machine_barcode</strong>  &#x21d2; <tt>Int</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the machine readable ean13</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Int</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The machine readable ean13 barcode</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sanger_barcodeable/sanger_barcode.rb', line 60</span>

<span class='kw'>def</span> <span class='id identifier rubyid_machine_barcode'>machine_barcode</span>
  <span class='ivar'>@machine_barcode</span> <span class='op'>||=</span> <span class='id identifier rubyid_calculate_machine_barcode'>calculate_machine_barcode</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="valid?-instance_method">
  
    #<strong>valid?</strong>  &#x21d2; <tt>Bool</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Checks is the data provided generate a valid barcode</p>
<ul><li>
<p>The number is in the correct range</p>
</li><li>
<p>Any provided checksum is correct</p>
</li><li>
<p>Any provided EAN is correct</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Bool</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true is the barode is valid, false otherwise</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sanger_barcodeable/sanger_barcode.rb', line 83</span>

<span class='kw'>def</span> <span class='id identifier rubyid_valid?'>valid?</span>
  <span class='id identifier rubyid_number'>number</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;=</span> <span class='const'>NUMBER_LENGTH</span> <span class='op'>&amp;&amp;</span>
    <span class='id identifier rubyid_calculate_checksum'>calculate_checksum</span> <span class='op'>==</span> <span class='id identifier rubyid_checksum'>checksum</span><span class='period'>.</span><span class='id identifier rubyid_human'>human</span> <span class='op'>&amp;&amp;</span>
    <span class='id identifier rubyid_check_ean'>check_ean</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Oct 31 13:43:55 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.3.1).
</div>

    </div>
  </body>
</html>